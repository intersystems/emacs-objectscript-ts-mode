


MAJOR-mode for ObjectScript in EMACs
-----------------------------------------
This is a major-mode for editing .cls files in ObjectScript using treesitter.

---------------- Preliminary -------------------

1. In order to run this major-mode, you will need EMACs with a version greater than 29.1.
   This should come shipped with treesitter but you will need to install that too if it is missing.
   
2. You will need the library files generated by tree-sitter-objectscript. Before you had to manually install the library files but now that we have a public repository,
you can simply run some elisp to get the library files into emacs.

    2a. First, you'll want to add the objectscript languages to treesit-language-source-alist. This tells tree-sitter where to get the parser.c files for each language. To do this run: 
    ```lisp
    (add-to-list 'treesit-language-source-alist
             '(objectscript_udl . ("https://github.com/intersystems/tree-sitter-objectscript.git"
                            "main" "udl/src")))
    ```.
        Do this for udl, core, expr, and html.
              
3. You will also need the treesitter grammars for python, java, and javascript if you want to write those and have syntax coloring in a .cls file.
   This can be done using the :treesitter-install-langauge-grammar since they are officially in the tree-sitter repo.
   
4. Once you told Emacs where the files are located, run :treesitter-install-language-grammar with objectscript_udl, objectscript_core, objectscript_expr, and objectscript_html. This will install them so the tree-sitter parser will parse objectscript when told to.
   
   
-------------- Install -------------------------


Once you've installed the grammar it's fairly simple to get the major-mode to work.
You just need to put it where all you're major modes are.
On Mac this should be in /Applications/Emacs.app/Content/Resources/lisp/progmodes/
but this can differ on Windows or Linux.

Alternatively, you can install the major mode via melpa. It is under
objectscript-treesitter-major-mode. That'll install it to your packages directory for use. As long as its on your 'loadpath, it should find the major mode.

This should be all that you need to run the major-mode. When you open your file you can now run M-x objectscript_udl-ts-mode to open up the major mode.

-------------- Default --------------------------


To make the major-mode the default for .cls files you will need to put these two lines into your init.el file:

 (autoload 'objectscript_udl-ts-mode "/Applications/Emacs.app/Contents/Resources/lisp/progmodes/objectscript_udl-ts-mode.el.gz" "A major mode for objectscript." t)
 (add-to-list 'auto-mode-alist '("\\.cls\\'" . objectscript_udl-ts-mode))

This should trump the mode for Latex files and make this major-mode the default when you run your command.


